<div class="education-card" (click)="openEducationDialog()">
  <div class="card-header">
    <div class="education-info">
      <div class="degree-icon">
        <span nz-icon nzType="book" nzTheme="outline"></span>
      </div>
      <div class="degree-details">
        <h3>{{ education.degree }}</h3>
        <div class="field">{{ education.field }}</div>
        <div class="institution">
          <span nz-icon nzType="bank" nzTheme="outline"></span>
          {{ education.institution }}
          <span class="short-name">({{ education.shortName }})</span>
        </div>
      </div>
    </div>
    <div class="meta-info">
      <div class="meta-item">
        <span nz-icon nzType="calendar" nzTheme="outline"></span>
        {{ education.startDate }} - {{ education.endDate }}
      </div>
      @if (education.gpa) {
        <div class="meta-item">
          <span nz-icon nzType="trophy" nzTheme="outline"></span>
          GPA: {{ education.gpa }}
        </div>
      }
    </div>
  </div>

  <div class="decorative-line"></div>

  <div class="card-content">
    <div class="description">{{ education.description }}</div>
    
    @if (education.achievements?.length) {
      <div class="achievements">
        <h4>
          <span nz-icon nzType="trophy" nzTheme="outline"></span>
          {{ 'SECTIONS.EDUCATION.ACHIEVEMENTS' | translate }}
        </h4>
        <ul>
          @for (achievement of education.achievements?.slice(0, 2) || []; track achievement) {
            <li>
              <span nz-icon nzType="check-circle" nzTheme="outline"></span>
              {{ achievement }}
            </li>
          }
          @if (education.achievements && education.achievements.length > 2) {
            <li class="more-indicator">+{{ education.achievements.length - 2 }} more</li>
          }
        </ul>
      </div>
    }
  </div>
</div>

<!-- Education Detail Dialog -->
<ng-template #educationDetailDialog>
  <div class="education-detail-dialog">
    <app-watermark class="dialog-watermark" [customIcon]="'book'"></app-watermark>
    
    <!-- Header Section -->
    <div class="dialog-header">
      <div class="header-content">
        <div class="degree-icon">
          <span nz-icon nzType="book" nzTheme="outline"></span>
        </div>
        <div class="education-info">
          <h2>{{ education.degree }}</h2>
          <h3 class="field">{{ education.field }}</h3>
          <div class="meta-info">
            <div class="meta-item">
              <span nz-icon nzType="calendar" nzTheme="outline"></span>
              {{ education.startDate }} - {{ education.endDate }}
            </div>
            <div class="meta-item">
              <span nz-icon nzType="bank" nzTheme="outline"></span>
              {{ education.institution }}
            </div>
            @if (education.gpa) {
              <div class="meta-item">
                <span nz-icon nzType="trophy" nzTheme="outline"></span>
                GPA: {{ education.gpa }}
              </div>
            }
          </div>
        </div>
      </div>
    </div>

    <!-- Content Tabs -->
    <div class="dialog-content">
      <nz-tabset [nzTabBarGutter]="8">
        <!-- Education Details Tab -->
        <nz-tab [nzTitle]="educationTabTitle">
          <ng-template #educationTabTitle>
            <span nz-icon nzType="profile" nzTheme="outline"></span>
            {{ 'SECTIONS.EDUCATION.EDUCATION_DETAILS' | translate }}
          </ng-template>
          
          <div class="tab-content">
            <!-- Overview Section -->
            <div class="dialog-section">
              <h3>{{ 'SECTIONS.EDUCATION.OVERVIEW' | translate }}</h3>
              <p class="description">{{ education.description }}</p>
            </div>

            <!-- Thesis Section -->
            @if (education.thesis) {
              <div class="dialog-section">
                <h3>
                  <span nz-icon nzType="solution" nzTheme="outline"></span>
                  {{ 'SECTIONS.EDUCATION.THESIS' | translate }}
                </h3>
                <div class="thesis-content">
                  <div class="thesis-title">{{ education.thesis.title }}</div>
                  <div class="thesis-description">{{ education.thesis.description }}</div>
                  <div class="thesis-meta">
                    <div class="meta-item">
                      <span nz-icon nzType="user" nzTheme="outline"></span>
                      <span>{{ 'SECTIONS.EDUCATION.SUPERVISOR' | translate }}: <strong>{{ education.thesis.supervisor }}</strong></span>
                    </div>
                    <div class="meta-item">
                      <span nz-icon nzType="trophy" nzTheme="outline"></span>
                      <span>{{ 'SECTIONS.EDUCATION.GRADE' | translate }}: <strong>{{ education.thesis.grade }}</strong></span>
                    </div>
                  </div>
                  <div class="thesis-tech">
                    @for (tech of education.thesis.technologies; track tech) {
                      <span class="tech-tag">{{ tech }}</span>
                    }
                  </div>
                </div>
              </div>
            }

            <!-- Key Subjects Section -->
            @if (education.keySubjects?.length) {
              <div class="dialog-section">
                <h3>
                  <span nz-icon nzType="book" nzTheme="outline"></span>
                  {{ 'SECTIONS.EDUCATION.KEY_SUBJECTS' | translate }}
                </h3>
                <div class="subjects-list">
                  @for (subject of education.keySubjects; track subject) {
                    <div class="subject-item">
                      <span nz-icon nzType="check-circle" nzTheme="outline"></span>
                      {{ subject }}
                    </div>
                  }
                </div>
              </div>
            }

            <!-- Achievements Section -->
            @if (education.achievements?.length) {
              <div class="dialog-section">
                <h3>
                  <span nz-icon nzType="trophy" nzTheme="outline"></span>
                  {{ 'SECTIONS.EDUCATION.ACHIEVEMENTS' | translate }}
                </h3>
                <ul class="achievements-list">
                  @for (achievement of education.achievements; track achievement) {
                    <li>
                      <span nz-icon nzType="check-circle" nzTheme="outline"></span>
                      {{ achievement }}
                    </li>
                  }
                </ul>
              </div>
            }
          </div>
        </nz-tab>

        <!-- Institution Info Tab -->
        <nz-tab [nzTitle]="institutionTabTitle">
          <ng-template #institutionTabTitle>
            <span nz-icon nzType="bank" nzTheme="outline"></span>
            {{ 'SECTIONS.EDUCATION.INSTITUTION_INFO' | translate }}
          </ng-template>
          
          <div class="tab-content">
            <!-- Institution Overview -->
            <div class="dialog-section">
              <h3>{{ 'SECTIONS.EDUCATION.ABOUT_INSTITUTION' | translate }}</h3>
              <p class="description">{{ education.institutionInfo.description }}</p>
            </div>

            <!-- Institution Stats -->
            <div class="dialog-section">
              <div class="stats-list">
                <div class="stat-item">
                  <span nz-icon nzType="calendar" nzTheme="outline"></span>
                  <div class="stat-value">{{ education.institutionInfo.established }}</div>
                  <div class="stat-label">{{ 'SECTIONS.EDUCATION.ESTABLISHED' | translate }}</div>
                </div>
                <div class="stat-item">
                  <span nz-icon nzType="team" nzTheme="outline"></span>
                  <div class="stat-value">{{ education.institutionInfo.studentCount }}</div>
                  <div class="stat-label">{{ 'SECTIONS.EDUCATION.STUDENTS' | translate }}</div>
                </div>
                <div class="stat-item">
                  <span nz-icon nzType="user" nzTheme="outline"></span>
                  <div class="stat-value">{{ education.institutionInfo.facultyCount }}</div>
                  <div class="stat-label">{{ 'SECTIONS.EDUCATION.FACULTY' | translate }}</div>
                </div>
                <div class="stat-item">
                  <span nz-icon nzType="global" nzTheme="outline"></span>
                  <div class="stat-value">{{ education.institutionInfo.internationalPartners }}</div>
                  <div class="stat-label">{{ 'SECTIONS.EDUCATION.PARTNERS' | translate }}</div>
                </div>
              </div>
            </div>
          </div>
        </nz-tab>
      </nz-tabset>
    </div>

    <!-- Contact Footer -->
    <div class="dialog-footer">
      <div class="contact-item">
        <span nz-icon nzType="environment" nzTheme="outline"></span>
        <span class="contact-text">{{ education.location }}</span>
      </div>
      <div class="contact-item">
        <span nz-icon nzType="global" nzTheme="outline"></span>
        <a [href]="education.institutionInfo.website" target="_blank" rel="noopener noreferrer" class="contact-text">
          {{ education.institutionInfo.website }}
        </a>
      </div>
    </div>
  </div>
</ng-template>
