<div [class]="config.className">
  <div class="container" [style.maxWidth.px]="config.maxWidth">
    <div class="section-header">
      <h2>
        <span nz-icon nzType="project" nzTheme="outline"></span>
        Featured Projects
      </h2>
    </div>

    <!-- Filter Tags -->
    <div class="filters-section">
      <div class="filters-header">
        <h3>Filter Projects</h3>
        @if (selectedTechnologies().length || selectedScopes().length || selectedStatuses().length) {
          <button class="clear-filters" (click)="clearFilters()">
            <span nz-icon nzType="clear" nzTheme="outline"></span>
            Clear Filters
          </button>
        }
      </div>

      <!-- Technology Filters -->
      <div class="filter-group">
        <div class="group-header">
          <span nz-icon nzType="code" nzTheme="outline"></span>
          Technologies
        </div>
        <div class="filter-tags">
          @for (tech of allTechnologies(); track tech) {
            <nz-tag
              [nzMode]="'checkable'"
              [nzColor]="'magenta'"
              (click)="toggleTechnologyFilter(tech)"
              class="filter-tag"
            >
              {{ tech }}
            </nz-tag>
          }
        </div>
      </div>

      <!-- Scope Filters -->
      @if (allScopes().length) {
        <div class="filter-group">
          <div class="group-header">
            <span nz-icon nzType="aim" nzTheme="outline"></span>
            Scope
          </div>
          <div class="filter-tags">
            @for (scope of allScopes(); track scope) {
              <nz-tag
                [nzColor]="selectedScopes().includes(scope) ? getTagColor(scope) : 'default'"
                (click)="toggleScopeFilter(scope)"
                class="filter-tag"
              >
                {{ scope }}
              </nz-tag>
            }
          </div>
        </div>
      }

      <!-- Status Filters -->
      @if (allStatuses().length) {
        <div class="filter-group">
          <div class="group-header">
            <span nz-icon nzType="check-circle" nzTheme="outline"></span>
            Status
          </div>
          <div class="filter-tags">
            @for (status of allStatuses(); track status) {
              <nz-tag
                [nzColor]="selectedStatuses().includes(status) ? getTagColor(status) : 'default'"
                (click)="toggleStatusFilter(status)"
                class="filter-tag"
              >
                {{ status }}
              </nz-tag>
            }
          </div>
        </div>
      }
    </div>

    <!-- Projects Grid -->
    <div class="projects-grid">
      @for (project of filteredProjects(); track project) {
        <div class="project-card">
          <div class="card-header">
            <h3>{{ project.name }}</h3>
            <div class="project-links">
              @if (project.github) {
                <a [href]="project.github" target="_blank" class="link-icon" title="GitHub Repository">
                  <span nz-icon nzType="github" nzTheme="outline"></span>
                </a>
              }
              @if (project.demo) {
                <a [href]="project.demo" target="_blank" class="link-icon" title="Live Demo">
                  <span nz-icon nzType="link" nzTheme="outline"></span>
                </a>
              }
            </div>
          </div>

          <div class="project-meta">
            @if (project.company) {
              <span class="meta-item">
                <span nz-icon nzType="team" nzTheme="outline"></span>
                {{ project.company }}
              </span>
            }
            <span class="meta-item">
              <span nz-icon nzType="calendar" nzTheme="outline"></span>
              {{ project.duration }}
            </span>
            @if (project.teamSize) {
              <span class="meta-item">
                <span nz-icon nzType="user" nzTheme="outline"></span>
                Team Size: {{ project.teamSize }}
              </span>
            }
            @if (project.status) {
              <nz-tag [nzColor]="getTagColor(project.status)" class="status-tag">
                {{ project.status }}
              </nz-tag>
            }
          </div>

          <p class="description">{{ project.description }}</p>

          <div class="role-scope">
            <div class="role">
              <h4>
                <span nz-icon nzType="user" nzTheme="outline"></span>
                Role
              </h4>
              <p>{{ project.role }}</p>
            </div>
            @if (project.scope) {
              <div class="scope">
                <h4>
                  <span nz-icon nzType="aim" nzTheme="outline"></span>
                  Scope
                </h4>
                <nz-tag [nzColor]="getTagColor(project.scope)">{{ project.scope }}</nz-tag>
              </div>
            }
          </div>

          <div class="tech-stack">
            <h4>
              <span nz-icon nzType="code" nzTheme="outline"></span>
              Technologies
            </h4>
            <div class="tech-tags">
              @for (tech of project.technologies; track tech) {
                <nz-tag
                  [nzColor]="getTagColor(tech)"
                  class="tech-tag clickable"
                  [class.active]="selectedTechnologies().includes(tech)"
                  (click)="toggleTechnologyFilter(tech)"
                >
                  {{ tech }}
                </nz-tag>
              }
            </div>
          </div>

          <div class="environment">
            <h4>
              <span nz-icon nzType="cluster" nzTheme="outline"></span>
              Environment
            </h4>
            <div class="tech-tags">
              @for (env of project.environment; track env) {
                <nz-tag [nzColor]="getTagColor(env)">{{ env }}</nz-tag>
              }
            </div>
          </div>

          @if (project.achievements?.length) {
            <div class="highlights">
              <h4>
                <span nz-icon nzType="trophy" nzTheme="outline"></span>
                Key Achievements
              </h4>
              <ul>
                @for (achievement of project.achievements; track achievement) {
                  <li>
                    <span nz-icon nzType="check" nzTheme="outline"></span>
                    {{ achievement }}
                  </li>
                }
              </ul>
            </div>
          }
        </div>
      }
    </div>
  </div>
</div>
