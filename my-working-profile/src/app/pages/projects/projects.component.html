<div [class]="config.className">
  <div class="container" [style.maxWidth.px]="config.maxWidth">
    <app-section-header title="Featured Projects" icon="project">
      <div class="section-subtitle">
        Specialized in Angular development with 4+ years of experience, and proficient in React with 2+ years of hands-on expertise
      </div>
    </app-section-header>

    <!-- Toolbar Section -->
    <div class="toolbar-section">
      <div class="view-controls">
        <button 
          class="view-toggle" 
          [class.active]="viewType() === 'grid'"
          (click)="setViewType('grid')" 
          title="Grid View"
        >
          <span nz-icon nzType="appstore" nzTheme="outline"></span>
        </button>
        <button 
          class="view-toggle" 
          [class.active]="viewType() === 'list'"
          (click)="setViewType('list')" 
          title="List View"
        >
          <span nz-icon nzType="unordered-list" nzTheme="outline"></span>
        </button>
      </div>
      <button 
        class="filter-toggle" 
        [class.active]="isFilterVisible()"
        (click)="toggleFilters()" 
        title="Toggle Filters"
      >
        <span nz-icon nzType="filter" nzTheme="outline"></span>
        Filters
        @if (selectedTechnologies().length || selectedScopes().length || selectedStatuses().length) {
          <span class="filter-badge">{{ getTotalFiltersCount() }}</span>
        }
      </button>
    </div>

    <!-- Filter Section -->
    <div class="filters-section" [class.visible]="isFilterVisible()">
      <div class="filters-header">
        <h3>Filter Projects</h3>
        @if (selectedTechnologies().length || selectedScopes().length || selectedStatuses().length) {
          <button class="clear-filters" (click)="clearFilters()">
            <span nz-icon nzType="clear" nzTheme="outline"></span>
            Clear All
          </button>
        }
      </div>

      <!-- Technology Filters -->
      <div class="filter-group">
        <div class="group-header">
          <span nz-icon nzType="code" nzTheme="outline"></span>
          Technologies
        </div>
        <div class="filter-tags">
          @for (tech of allTechnologies(); track tech) {
            <div
              class="filter-tag"
              [class.active]="isTechnologySelected(tech)"
              (click)="toggleTechnologyFilter(tech)"
            >
              <span nz-icon [nzType]="getTechnologyIcon(tech)" nzTheme="outline"></span>
              {{ tech }}
            </div>
          }
        </div>
      </div>

      <!-- Scope Filters -->
      @if (allScopes().length) {
        <div class="filter-group">
          <div class="group-header">
            <span nz-icon nzType="aim" nzTheme="outline"></span>
            Project Scope
          </div>
          <div class="filter-tags">
            @for (scope of allScopes(); track scope) {
              <div
                class="filter-tag"
                [class.active]="isScopeSelected(scope)"
                (click)="toggleScopeFilter(scope)"
              >
                {{ scope }}
              </div>
            }
          </div>
        </div>
      }

      <!-- Status Filters -->
      @if (allStatuses().length) {
        <div class="filter-group">
          <div class="group-header">
            <span nz-icon nzType="check-circle" nzTheme="outline"></span>
            Project Status
          </div>
          <div class="filter-tags">
            @for (status of allStatuses(); track status) {
              <div
                class="filter-tag"
                [class.active]="isStatusSelected(status)"
                (click)="toggleStatusFilter(status)"
              >
                {{ status }}
              </div>
            }
          </div>
        </div>
      }
    </div>

    <!-- Projects Container -->
    <div class="projects-container" [class.list-view]="viewType() === 'list'">
      @for (project of filteredProjects(); track project) {
        <app-project-detail
          [project]="project"
          [viewType]="viewType()"
          [isExpanded]="isProjectExpanded(project)"
          [selectedTechnologies]="selectedTechnologies()"
          (toggleExpand)="toggleProjectExpansion(project)"
          (technologyClick)="toggleTechnologyFilter($event)"
        ></app-project-detail>
      }
    </div>
  </div>
</div>
