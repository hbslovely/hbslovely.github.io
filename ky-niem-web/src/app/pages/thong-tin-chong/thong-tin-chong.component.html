<!-- Animated Background -->
<div class="profile-bg-animated">
  <span class="floating-star" *ngFor="let n of [1,2,3,4,5,6,7,8,9,10]" [style.left.%]="10 * n + (n % 2 === 0 ? 5 : 0)" [style.animationDuration]="(6 + n % 4) + 's'">üíô</span>
  <span class="floating-star2" *ngFor="let n of [1,2,3,4,5]" [style.left.%]="20 * n - 5" [style.animationDuration]="(8 + n % 3) + 's'">‚≠ê</span>
</div>

<!-- Profile Header -->
<div class="profile-header-flat">
  <div class="profile-avatar">
    <img src="assets/images/phat/phat-portrait.png" alt="Ch√¢n dung" />
    <img class="avatar-deco" src="assets/images/phat/phat_dam-cuoi.png" alt="Deco" />
  </div>
  <div class="profile-main-info">
    <h1 class="profile-name">{{ husbandData.basicInfo?.name }}</h1>
    <h2 class="profile-title">{{ husbandData.basicInfo?.title }}</h2>
    <div class="profile-header-img-row">
      <img class="inline-icon-lg" src="assets/images/phat/phat-work.png" alt="icon" />
      <img class="inline-icon-lg" src="assets/images/phat/phat-travel.png" alt="icon" />
    </div>
    <p class="profile-desc">{{ husbandData.basicInfo?.description }}</p>
    <div class="profile-tags">
      <span class="profile-tag" *ngFor="let tag of husbandData.basicInfo?.tags">{{ tag }}</span>
    </div>
    <div class="profile-love-message">{{ husbandData.basicInfo?.loveMessage }}</div>
  </div>
</div>

<div class="content-container-flat">
  <div class="section-img-row">
    <img class="section-divider-img-lg" src="assets/images/phat/phat_dam-cuoi-2.png" alt="divider" />
  </div>
  <hr>
  <!-- Traits -->
  <section class="traits-section-flat">
    <h2>ƒê·∫∑c ƒëi·ªÉm t√≠nh c√°ch</h2>
    <div class="section-img-row">
      <img class="section-divider-img-lg" src="assets/images/phat/phat-work.png" alt="divider" />
    </div>
    <p class="section-intro">T√¥i l√† ng∆∞·ªùi ƒë√†n √¥ng v·ªõi nhi·ªÅu n√©t t√≠nh c√°ch ƒëa d·∫°ng, t·ª´ s·ª± quy·∫øt ƒëo√°n ƒë·∫øn l√≤ng ki√™n nh·∫´n. Nh·ªØng ƒë·∫∑c ƒëi·ªÉm n√†y kh√¥ng ch·ªâ gi√∫p t√¥i v∆∞·ª£t qua th·ª≠ th√°ch m√† c√≤n l√† ƒëi·ªÉm t·ª±a v·ªØng ch·∫Øc cho gia ƒë√¨nh nh·ªè c·ªßa m√¨nh.</p>
    <ul class="traits-list">
      <li *ngFor="let trait of husbandData.traits">
        <span class="trait-icon"><i [class]="trait.icon"></i></span>
        <span class="trait-title">{{ trait.title }}:</span>
        <span class="trait-desc">{{ getTraitDescription(trait.description) }} ({{ getTraitValue(trait.description) }})</span>
        <img class="mini-img-lg" *ngIf="trait.title === 'Ki√™n tr√¨'" src="assets/images/phat/phat-work.png" alt="mini" />
        <img class="mini-img-lg" *ngIf="trait.title === 'Gia ƒë√¨nh'" src="assets/images/phat/phat_dam-cuoi-2.png" alt="mini" />
      </li>
    </ul>
    <p class="section-extra">M·ªói t√≠nh c√°ch l√† m·ªôt b√†i h·ªçc, m·ªôt tr·∫£i nghi·ªám gi√∫p t√¥i tr∆∞·ªüng th√†nh h∆°n m·ªói ng√†y.</p>
  </section>
  <div class="section-img-row">
    <img class="section-divider-img-lg" src="assets/images/phat/phat-hobby.png" alt="divider" />
  </div>
  <hr>
  <!-- Hobbies -->
  <section class="hobbies-section-flat">
    <h2>S·ªü th√≠ch & ƒêam m√™</h2>
    <div class="section-img-row">
      <img class="section-divider-img-lg" src="assets/images/phat/phat-travel.png" alt="divider" />
    </div>
    <p class="section-intro">B√™n c·∫°nh c√¥ng vi·ªác, t√¥i lu√¥n d√†nh th·ªùi gian cho nh·ªØng s·ªü th√≠ch c√° nh√¢n. ƒê√≥ l√† n∆°i t√¥i t√¨m th·∫•y s·ª± c√¢n b·∫±ng, ni·ªÅm vui v√† c·∫£m h·ª©ng ƒë·ªÉ ti·∫øp t·ª•c ph·∫•n ƒë·∫•u.</p>
    <ul class="hobbies-list">
      <li *ngFor="let hobby of husbandData.hobbies">
        <span class="hobby-icon"><i [class]="hobby.icon"></i></span>
        <span class="hobby-title">{{ hobby.name }}:</span>
        <span class="hobby-desc">{{ hobby.description }}</span>
        <img class="mini-img-lg" *ngIf="hobby.name === 'Du l·ªãch'" src="assets/images/phat/phat-travel.png" alt="mini" />
        <img class="mini-img-lg" *ngIf="hobby.name === 'L√†m vi·ªác'" src="assets/images/phat/phat-work.png" alt="mini" />
      </li>
    </ul>
    <p class="section-extra">Nh·ªØng ƒëam m√™ n√†y kh√¥ng ch·ªâ gi√∫p t√¥i ph√°t tri·ªÉn b·∫£n th√¢n m√† c√≤n t·∫°o n√™n nh·ªØng k·ª∑ ni·ªám ƒë√°ng nh·ªõ b√™n gia ƒë√¨nh v√† b·∫°n b√®.</p>
  </section>
  <div class="section-img-row">
    <img class="section-divider-img-lg" src="assets/images/phat/phat_ho-may-vung-tau_10-2023.png" alt="divider" />
  </div>
  <hr>
  <!-- Fun Facts -->
  <section class="fun-facts-section-flat" *ngIf="husbandData.funFacts && husbandData.funFacts.length >= 3">
    <h2>Nh·ªØng ƒëi·ªÅu th√∫ v·ªã v·ªÅ t√¥i</h2>
    <div class="section-img-row">
      <img class="section-divider-img-lg" src="assets/images/phat/phat_dam-cuoi.png" alt="divider" />
    </div>
    <p class="section-intro">Cu·ªôc s·ªëng c·ªßa t√¥i kh√¥ng ch·ªâ c√≥ nh·ªØng th√†nh t·ª±u l·ªõn m√† c√≤n l√† nh·ªØng ƒëi·ªÅu nh·ªè b√©, gi·∫£n d·ªã nh∆∞ng ƒë·∫ßy √Ω nghƒ©a. D∆∞·ªõi ƒë√¢y l√† m·ªôt v√†i ƒëi·ªÅu th√∫ v·ªã v·ªÅ t√¥i m√† c√≥ th·ªÉ b·∫°n ch∆∞a bi·∫øt!</p>
    <ol class="fun-facts-list">
      <li *ngFor="let fact of [
        { title: 'Kho·∫£nh kh·∫Øc ƒë·∫ßu ti√™n', description: husbandData.funFacts[0]?.description },
        { title: 'Chuy·∫øn ƒëi ƒë√°ng nh·ªõ', description: husbandData.funFacts[1]?.description },
        { title: 'M√≥n qu√† √Ω nghƒ©a', description: husbandData.funFacts[2]?.description },
        { title: 'K·ª∑ ni·ªám kh√≥ qu√™n', description: 'Nh·ªØng chuy·∫øn ƒëi xa c√πng nhau lu√¥n l√† nh·ªØng k·ª∑ ni·ªám ƒë√°ng nh·ªõ nh·∫•t. M·ªói ƒë·ªãa ƒëi·ªÉm m·ªõi l√† m·ªôt c√¢u chuy·ªán m·ªõi, m·ªôt tr·∫£i nghi·ªám m·ªõi cho c·∫£ hai.' }
      ]; let i = index">
        <span class="fact-number">{{ i + 1 }}.</span>
        <span class="fact-title">{{ fact.title }}:</span>
        <span class="fact-desc">{{ fact.description }}</span>
        <img class="mini-img-lg" *ngIf="i === 0" src="assets/images/phat/phat_dam-cuoi.png" alt="mini" />
        <img class="mini-img-lg" *ngIf="i === 2" src="assets/images/phat/phat-hobby.png" alt="mini" />
      </li>
    </ol>
    <p class="section-extra">Ch√≠nh nh·ªØng ƒëi·ªÅu nh·ªè b√© n√†y ƒë√£ t·∫°o n√™n m·ªôt t√¥i r·∫•t ri√™ng, g·∫ßn g≈©i v√† ch√¢n th√†nh.</p>
  </section>
</div>

<style>
body, .profile-bg-animated {
  background: linear-gradient(135deg, #e6f0ff 0%, #f0f7ff 100%) !important;
  min-height: 100vh;
  position: relative;
}
.profile-bg-animated {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  z-index: 0;
  pointer-events: none;
  overflow: hidden;
}
.floating-star, .floating-star2 {
  position: absolute;
  bottom: -40px;
  font-size: 2rem;
  opacity: 0.5;
  animation: floatUp 8s linear infinite;
}
.floating-star2 {
  font-size: 1.7rem;
  opacity: 0.4;
  animation-duration: 10s;
}
@keyframes floatUp {
  0% { transform: translateY(0) scale(1) rotate(0deg); opacity: 0.5; }
  50% { opacity: 0.7; }
  100% { transform: translateY(-100vh) scale(1.2) rotate(20deg); opacity: 0; }
}
.profile-header-flat {
  display: flex;
  align-items: center;
  gap: 2rem;
  padding: 2rem 0 1rem 0;
  border-bottom: 2px solid #e6f0ff;
  flex-wrap: wrap;
  position: relative;
  z-index: 1;
}
.profile-avatar {
  flex: 0 0 140px;
  width: 140px;
  height: 140px;
  border-radius: 50%;
  overflow: hidden;
  background: #fff;
  box-shadow: 0 2px 8px rgba(65, 105, 225, 0.08);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}
.avatar-deco {
  position: absolute;
  bottom: -24px;
  right: -24px;
  width: 64px;
  height: 64px;
  border-radius: 16px;
  box-shadow: 0 2px 8px rgba(65, 105, 225, 0.13);
  border: 2px solid #fff;
  background: #fff;
  z-index: 2;
  animation: popIn 1.2s cubic-bezier(.68,-0.55,.27,1.55) both;
}
@keyframes popIn {
  0% { transform: scale(0.2) rotate(-30deg); opacity: 0; }
  80% { transform: scale(1.1) rotate(10deg); opacity: 1; }
  100% { transform: scale(1) rotate(0deg); opacity: 1; }
}
.inline-icon-lg {
  width: 48px;
  height: 48px;
  vertical-align: middle;
  margin: 0 0.5rem 0.5rem 0;
  animation: popIn 1.2s cubic-bezier(.68,-0.55,.27,1.55) both;
}
.profile-header-img-row {
  display: flex;
  gap: 1rem;
  margin-bottom: 0.5rem;
  flex-wrap: wrap;
}
.section-img-row {
  display: flex;
  justify-content: center;
  margin: 1.2rem 0 0.7rem 0;
}
.section-divider-img-lg {
  width: 72px;
  height: 72px;
  opacity: 0.85;
  filter: drop-shadow(0 2px 6px #e6f0ff);
  animation: popIn 1.2s cubic-bezier(.68,-0.55,.27,1.55) both;
  border-radius: 16px;
  background: #fff;
  border: 2px solid #e6f0ff;
}
.mini-img-lg {
  width: 44px;
  height: 44px;
  margin-left: 0.7rem;
  border-radius: 12px;
  box-shadow: 0 1px 8px rgba(65, 105, 225, 0.13);
  vertical-align: middle;
  animation: popIn 1.2s cubic-bezier(.68,-0.55,.27,1.55) both;
  background: #fff;
  border: 2px solid #e6f0ff;
}
.profile-main-info {
  flex: 1;
  min-width: 220px;
}
.profile-name {
  font-size: 2rem;
  margin: 0 0 0.5rem 0;
  color: #4169e1;
  font-family: 'Dancing Script', cursive;
}
.profile-title {
  font-size: 1.1rem;
  color: #4169e1;
  margin-bottom: 1rem;
}
.profile-desc {
  font-size: 1.05rem;
  color: #444;
  margin-bottom: 1rem;
}
.profile-tags {
  margin-bottom: 1rem;
}
.profile-tag {
  display: inline-block;
  background: #e6f0ff;
  color: #4169e1;
  border-radius: 12px;
  padding: 0.2rem 0.8rem;
  font-size: 0.95rem;
  margin-right: 0.5rem;
  margin-bottom: 0.3rem;
}
.profile-love-message {
  font-family: 'Dancing Script', cursive;
  font-size: 1.2rem;
  color: #4169e1;
  margin-top: 1rem;
}
.content-container-flat {
  max-width: 900px;
  margin: 0 auto;
  padding: 1.5rem 0;
  position: relative;
  z-index: 1;
}
hr {
  border: none;
  border-top: 1.5px solid #e6f0ff;
  margin: 2.5rem 0 2rem 0;
}
section {
  margin-bottom: 1.5rem;
}
.section-intro {
  color: #4169e1;
  font-size: 1.05rem;
  margin-bottom: 1rem;
  font-style: italic;
}
.section-extra {
  color: #888;
  font-size: 0.98rem;
  margin-top: 1rem;
  font-style: italic;
}
.traits-list, .hobbies-list, .fun-facts-list {
  list-style: none;
  padding: 0;
  margin: 0;
}
.traits-list li, .hobbies-list li, .fun-facts-list li {
  display: flex;
  align-items: flex-start;
  gap: 0.7rem;
  margin-bottom: 0.7rem;
  font-size: 1.05rem;
}
.trait-icon, .hobby-icon {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #4169e1;
  font-size: 1.2rem;
}
.trait-title, .hobby-title, .fact-title {
  font-weight: 600;
  color: #4169e1;
}
.fact-number {
  font-weight: bold;
  color: #4169e1;
  margin-right: 0.3rem;
}
.fact-title {
  margin-right: 0.3rem;
}
@media (max-width: 700px) {
  .profile-header-flat {
    flex-direction: column;
    align-items: flex-start;
    text-align: center;
    padding: 1rem 0 0.5rem 0;
  }
  .profile-main-info {
    width: 100%;
    min-width: 0;
  }
  .content-container-flat {
    padding: 0.5rem 0;
  }
  .traits-list li, .hobbies-list li, .fun-facts-list li {
    font-size: 0.98rem;
  }
  .inline-icon-lg, .section-divider-img-lg, .mini-img-lg {
    width: 36px !important;
    height: 36px !important;
  }
}
</style>

<script>
function getTraitPercentage(description: string): string {
  const match = description.match(/(\d+)([%.]?\d*)/);
  if (match) {
    const value = parseFloat(match[0]);
    return `${value}%`;
  }
  return '50%';
}

function getTraitValue(description: string): string {
  const match = description.match(/(\d+)([%.]?\d*)/);
  if (match) {
    return match[0];
  }
  return '';
}

function getTraitDescription(description: string): string {
  return description.replace(/\d+([%.]?\d*)\s*-\s*/, '');
}
</script>
