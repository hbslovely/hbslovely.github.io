<!-- Profile Header -->
<div class="profile-header-flat">
  <div class="profile-avatar">
    <img src="assets/images/phat/phat-portrait.png" alt="Chân dung" />
    <img class="avatar-deco" src="assets/images/phat/phat_dam-cuoi.png" alt="Deco" />
  </div>
  <div class="profile-main-info">
    <h1 class="profile-name">{{ husbandData.basicInfo?.name }}</h1>
    <h2 class="profile-title">{{ husbandData.basicInfo?.title }}</h2>
    <div class="profile-header-img-row">
      <img class="inline-icon-lg" src="assets/images/phat/phat-work.png" alt="icon" />
      <img class="inline-icon-lg" src="assets/images/phat/phat-travel.png" alt="icon" />
    </div>
    <p class="profile-desc">{{ husbandData.basicInfo?.description }}</p>
    <div class="profile-tags">
      <span class="profile-tag" *ngFor="let tag of husbandData.basicInfo?.tags">{{ tag }}</span>
    </div>
    <div class="profile-love-message">{{ husbandData.basicInfo?.loveMessage }}</div>
  </div>
</div>

<div class="content-container-flat">
  <div class="section-img-row">
    <img class="section-divider-img-lg" src="assets/images/phat/phat_dam-cuoi-2.png" alt="divider" />
  </div>
  <hr>
  <!-- Traits -->
  <section class="traits-section-flat flat-bg">
    <h2>Đặc điểm tính cách</h2>
    <div class="section-img-row">
      <img class="section-divider-img-lg" src="assets/images/phat/phat-work.png" alt="divider" />
    </div>
    <p class="section-intro">Tôi là người đàn ông với nhiều nét tính cách đa dạng, từ sự quyết đoán đến lòng kiên nhẫn. Những đặc điểm này không chỉ giúp tôi vượt qua thử thách mà còn là điểm tựa vững chắc cho gia đình nhỏ của mình.</p>
    <ul class="traits-list">
      <li *ngFor="let trait of husbandData.traits">
        <span class="trait-icon"><i [class]="trait.icon"></i></span>
        <span class="trait-title">{{ trait.title }}:</span>
        <span class="trait-desc">{{ getTraitDescription(trait.description) }} ({{ getTraitValue(trait.description) }})</span>
        <img class="mini-img-lg" *ngIf="trait.title === 'Kiên trì'" src="assets/images/phat/phat-work.png" alt="mini" />
        <img class="mini-img-lg" *ngIf="trait.title === 'Gia đình'" src="assets/images/phat/phat_dam-cuoi-2.png" alt="mini" />
      </li>
    </ul>
    <p class="section-extra">Mỗi tính cách là một bài học, một trải nghiệm giúp tôi trưởng thành hơn mỗi ngày.</p>
  </section>
  <div class="section-img-row">
    <img class="section-divider-img-lg" src="assets/images/phat/phat-hobby.png" alt="divider" />
  </div>
  <hr>
  <!-- Hobbies -->
  <section class="hobbies-section-flat flat-bg">
    <h2>Sở thích & Đam mê</h2>
    <div class="section-img-row">
      <img class="section-divider-img-lg" src="assets/images/phat/phat-travel.png" alt="divider" />
    </div>
    <p class="section-intro">Bên cạnh công việc, tôi luôn dành thời gian cho những sở thích cá nhân. Đó là nơi tôi tìm thấy sự cân bằng, niềm vui và cảm hứng để tiếp tục phấn đấu.</p>
    <ul class="hobbies-list">
      <li *ngFor="let hobby of husbandData.hobbies">
        <span class="hobby-icon"><i [class]="hobby.icon"></i></span>
        <span class="hobby-title">{{ hobby.name }}:</span>
        <span class="hobby-desc">{{ hobby.description }}</span>
        <img class="mini-img-lg" *ngIf="hobby.name === 'Du lịch'" src="assets/images/phat/phat-travel.png" alt="mini" />
        <img class="mini-img-lg" *ngIf="hobby.name === 'Làm việc'" src="assets/images/phat/phat-work.png" alt="mini" />
      </li>
    </ul>
    <p class="section-extra">Những đam mê này không chỉ giúp tôi phát triển bản thân mà còn tạo nên những kỷ niệm đáng nhớ bên gia đình và bạn bè.</p>
  </section>
  <div class="section-img-row">
    <img class="section-divider-img-lg" src="assets/images/phat/phat_ho-may-vung-tau_10-2023.png" alt="divider" />
  </div>
  <hr>
  <!-- Fun Facts -->
  <section class="fun-facts-section-flat flat-bg" *ngIf="husbandData.funFacts && husbandData.funFacts.length >= 3">
    <h2>Những điều thú vị về tôi</h2>
    <div class="section-img-row">
      <img class="section-divider-img-lg" src="assets/images/phat/phat_dam-cuoi.png" alt="divider" />
    </div>
    <p class="section-intro">Cuộc sống của tôi không chỉ có những thành tựu lớn mà còn là những điều nhỏ bé, giản dị nhưng đầy ý nghĩa. Dưới đây là một vài điều thú vị về tôi mà có thể bạn chưa biết!</p>
    <ol class="fun-facts-list">
      <li *ngFor="let fact of [
        { title: 'Khoảnh khắc đầu tiên', description: husbandData.funFacts[0]?.description },
        { title: 'Chuyến đi đáng nhớ', description: husbandData.funFacts[1]?.description },
        { title: 'Món quà ý nghĩa', description: husbandData.funFacts[2]?.description },
        { title: 'Kỷ niệm khó quên', description: 'Những chuyến đi xa cùng nhau luôn là những kỷ niệm đáng nhớ nhất. Mỗi địa điểm mới là một câu chuyện mới, một trải nghiệm mới cho cả hai.' }
      ]; let i = index">
        <span class="fact-number">{{ i + 1 }}.</span>
        <span class="fact-title">{{ fact.title }}:</span>
        <span class="fact-desc">{{ fact.description }}</span>
        <img class="mini-img-lg" *ngIf="i === 0" src="assets/images/phat/phat_dam-cuoi.png" alt="mini" />
        <img class="mini-img-lg" *ngIf="i === 2" src="assets/images/phat/phat-hobby.png" alt="mini" />
      </li>
    </ol>
    <p class="section-extra">Chính những điều nhỏ bé này đã tạo nên một tôi rất riêng, gần gũi và chân thành.</p>
  </section>
</div>

<style>
body {
  background: #e6f0ff !important;
  min-height: 100vh;
  position: relative;
}
.profile-header-flat {
  display: flex;
  align-items: center;
  gap: 2rem;
  padding: 2rem 0 1rem 0;
  border-bottom: 2px solid #e6f0ff;
  flex-wrap: wrap;
  position: relative;
  z-index: 1;
}
.profile-avatar {
  flex: 0 0 140px;
  width: 140px;
  height: 140px;
  border-radius: 50%;
  overflow: hidden;
  background: #fff;
  box-shadow: 0 2px 8px rgba(65, 105, 225, 0.08);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}
.avatar-deco {
  position: absolute;
  bottom: -24px;
  right: -24px;
  width: 64px;
  height: 64px;
  border-radius: 16px;
  box-shadow: 0 2px 8px rgba(65, 105, 225, 0.13);
  border: 2px solid #fff;
  background: #fff;
  z-index: 2;
  animation: popIn 1.2s cubic-bezier(.68,-0.55,.27,1.55) both;
}
@keyframes popIn {
  0% { transform: scale(0.2) rotate(-30deg); opacity: 0; }
  80% { transform: scale(1.1) rotate(10deg); opacity: 1; }
  100% { transform: scale(1) rotate(0deg); opacity: 1; }
}
.inline-icon-lg {
  width: 48px;
  height: 48px;
  vertical-align: middle;
  margin: 0 0.5rem 0.5rem 0;
  animation: popIn 1.2s cubic-bezier(.68,-0.55,.27,1.55) both;
}
.profile-header-img-row {
  display: flex;
  gap: 1rem;
  margin-bottom: 0.5rem;
  flex-wrap: wrap;
}
.section-img-row {
  display: flex;
  justify-content: center;
  margin: 1.2rem 0 0.7rem 0;
}
.section-divider-img-lg {
  width: 72px;
  height: 72px;
  opacity: 0.85;
  filter: drop-shadow(0 2px 6px #e6f0ff);
  animation: popIn 1.2s cubic-bezier(.68,-0.55,.27,1.55) both;
  border-radius: 16px;
  background: #fff;
  border: 2px solid #e6f0ff;
}
.mini-img-lg {
  width: 44px;
  height: 44px;
  margin-left: 0.7rem;
  border-radius: 12px;
  box-shadow: 0 1px 8px rgba(65, 105, 225, 0.13);
  vertical-align: middle;
  animation: popIn 1.2s cubic-bezier(.68,-0.55,.27,1.55) both;
  background: #fff;
  border: 2px solid #e6f0ff;
}
.profile-main-info {
  flex: 1;
  min-width: 220px;
}
.profile-name {
  font-size: 2rem;
  margin: 0 0 0.5rem 0;
  color: #4169e1;
  font-family: 'Dancing Script', cursive;
}
.profile-title {
  font-size: 1.1rem;
  color: #4169e1;
  margin-bottom: 1rem;
}
.profile-desc {
  font-size: 1.05rem;
  color: #444;
  margin-bottom: 1rem;
}
.profile-tags {
  margin-bottom: 1rem;
}
.profile-tag {
  display: inline-block;
  background: #e6f0ff;
  color: #4169e1;
  border-radius: 12px;
  padding: 0.2rem 0.8rem;
  font-size: 0.95rem;
  margin-right: 0.5rem;
  margin-bottom: 0.3rem;
}
.profile-love-message {
  font-family: 'Dancing Script', cursive;
  font-size: 1.2rem;
  color: #4169e1;
  margin-top: 1rem;
}
.content-container-flat {
  max-width: 900px;
  margin: 0 auto;
  padding: 1.5rem 0;
  position: relative;
  z-index: 1;
}
hr {
  border: none;
  border-top: 1.5px solid #e6f0ff;
  margin: 2.5rem 0 2rem 0;
}
section, .flat-bg {
  margin-bottom: 1.5rem;
  background: #e6f0ff !important;
  box-shadow: none !important;
  border-radius: 0 !important;
  border: none !important;
}
.section-intro {
  color: #4169e1;
  font-size: 1.05rem;
  margin-bottom: 1rem;
  font-style: italic;
}
.section-extra {
  color: #888;
  font-size: 0.98rem;
  margin-top: 1rem;
  font-style: italic;
}
.traits-list, .hobbies-list, .fun-facts-list {
  list-style: none;
  padding: 0;
  margin: 0;
}
.traits-list li, .hobbies-list li, .fun-facts-list li {
  display: flex;
  align-items: flex-start;
  gap: 0.7rem;
  margin-bottom: 0.7rem;
  font-size: 1.05rem;
}
.trait-icon, .hobby-icon {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #4169e1;
  font-size: 1.2rem;
}
.trait-title, .hobby-title, .fact-title {
  font-weight: 600;
  color: #4169e1;
}
.fact-number {
  font-weight: bold;
  color: #4169e1;
  margin-right: 0.3rem;
}
.fact-title {
  margin-right: 0.3rem;
}
@media (max-width: 700px) {
  .profile-header-flat {
    flex-direction: column;
    align-items: flex-start;
    text-align: center;
    padding: 1rem 0 0.5rem 0;
  }
  .profile-main-info {
    width: 100%;
    min-width: 0;
  }
  .content-container-flat {
    padding: 0.5rem 0;
  }
  .traits-list li, .hobbies-list li, .fun-facts-list li {
    font-size: 0.98rem;
  }
  .inline-icon-lg, .section-divider-img-lg, .mini-img-lg {
    width: 36px !important;
    height: 36px !important;
  }
}
</style>

<script>
function getTraitPercentage(description: string): string {
  const match = description.match(/(\d+)([%.]?\d*)/);
  if (match) {
    const value = parseFloat(match[0]);
    return `${value}%`;
  }
  return '50%';
}

function getTraitValue(description: string): string {
  const match = description.match(/(\d+)([%.]?\d*)/);
  if (match) {
    return match[0];
  }
  return '';
}

function getTraitDescription(description: string): string {
  return description.replace(/\d+([%.]?\d*)\s*-\s*/, '');
}
</script>
