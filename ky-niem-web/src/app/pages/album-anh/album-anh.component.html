<div class="album-page">
  <!-- Album List View -->
  <div class="album-list" *ngIf="!selectedAlbumId">
    <app-album-header
      [totalPhotos]="getTotalPhotos()"
      [previewPhotos]="getRandomPreviewPhotos(3)">
    </app-album-header>

    <div class="view-controls">
      <button class="view-btn" [class.active]="viewMode === 'grid'" (click)="viewMode = 'grid'">
        <i class="pi pi-th-large"></i>
      </button>
      <button class="view-btn" [class.active]="viewMode === 'list'" (click)="viewMode = 'list'">
        <i class="pi pi-list"></i>
      </button>
    </div>

    <div class="albums" [class.grid-view]="viewMode === 'grid'" [class.list-view]="viewMode === 'list'">
      <div class="album-card" *ngFor="let album of albums" (click)="openAlbum(album.id)">
        <div class="album-cover">
          <img [src]="album.coverImage" [alt]="album.title">
          <div class="photo-count">
            <i class="pi pi-images"></i>
            {{ album.photoCount }} áº£nh
          </div>
        </div>
        <div class="album-info">
          <h3>
            <i class="pi pi-folder"></i>
            {{ album.title }}
          </h3>
          <p>{{ album.description }}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Album Detail View -->
  <div class="album-detail" *ngIf="selectedAlbumId && selectedAlbum">
    <app-album-detail-header
      [title]="selectedAlbum.title"
      [description]="selectedAlbum.description"
      [coverImage]="selectedAlbum.coverImage"
      [photoCount]="selectedAlbum.photos.length"
      [previewPhotos]="getAlbumPreviewPhotos(selectedAlbum)"
      (onBack)="goBack()">
    </app-album-detail-header>

    <div class="view-controls">
      <button class="view-btn" [class.active]="detailViewMode === 'masonry'" (click)="setDetailViewMode('masonry')">
        <i class="pi pi-images"></i>
      </button>
      <button class="view-btn" [class.active]="detailViewMode === 'carousel'" (click)="setDetailViewMode('carousel')">
        <i class="pi pi-camera"></i>
      </button>
    </div>

    <!-- Grid View -->
    <div class="photos-grid" *ngIf="detailViewMode === 'grid'">
      <div class="photo-card" *ngFor="let photo of selectedAlbum.photos" (click)="openPhotoViewer(photo)">
        <img [src]="photo.url" [alt]="photo.title">
        <div class="photo-info">
          <h4>{{ photo.title }}</h4>
          <p *ngIf="photo.description">{{ photo.description }}</p>
        </div>
      </div>
    </div>

    <!-- Masonry View -->
    <div class="photos-masonry" *ngIf="detailViewMode === 'masonry'">
      <div class="masonry-column" *ngFor="let column of getMasonryColumns()">
        <div class="photo-card" *ngFor="let photo of column" (click)="openPhotoViewer(photo)">
          <img [src]="photo.url" [alt]="photo.title">
          <div class="photo-info">
            <h4>{{ photo.title }}</h4>
            <p *ngIf="photo.description">{{ photo.description }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Carousel View -->
    <div class="photos-carousel" *ngIf="detailViewMode === 'carousel'">
      <app-album-gallery [images]="selectedAlbumPhotos"></app-album-gallery>
    </div>
  </div>

  <!-- Photo Viewer -->
  <div class="photo-viewer" *ngIf="selectedPhoto" (click)="closePhotoViewer()">
    <div class="viewer-content" (click)="$event.stopPropagation()">
      <button class="close-btn" (click)="closePhotoViewer()">
        <i class="pi pi-times"></i>
      </button>

      <button class="nav-btn prev" *ngIf="canNavigatePrev()" (click)="prevPhoto($event)">
        <i class="pi pi-chevron-left"></i>
      </button>

      <div class="photo-container">
        <img [src]="selectedPhoto.url" [alt]="selectedPhoto.title">
        <div class="photo-info">
          <h3>{{ selectedPhoto.title }}</h3>
          <p *ngIf="selectedPhoto.description">{{ selectedPhoto.description }}</p>
        </div>
      </div>

      <button class="nav-btn next" *ngIf="canNavigateNext()" (click)="nextPhoto($event)">
        <i class="pi pi-chevron-right"></i>
      </button>
    </div>
  </div>
</div>
