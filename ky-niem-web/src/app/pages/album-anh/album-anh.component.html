<!-- Album Header -->
<div class="album-header">
  <!-- Background image with parallax effect -->
  <div class="background-image"
       [style.background-image]="'url(assets/images/albums/ngay-cuoi_3-2022/1.png)'">
  </div>

  <!-- Content overlay with animation -->
  <div class="content-overlay">
    <!-- Album info -->
    <div class="album-info">
      <div class="title-section">
        <h1 class="title">Album K·ª∑ Ni·ªám</h1>
        <p class="subtitle">N∆°i l∆∞u gi·ªØ nh·ªØng kho·∫£nh kh·∫Øc ƒë·∫πp c·ªßa ch√∫ng m√¨nh üíï</p>
      </div>
      
      <!-- Stats info -->
      <div class="stats-info">
        <div class="stat-item">
          <i class="pi pi-images"></i>
          <span>{{ albums.length }} Albums</span>
        </div>
        <div class="stat-item">
          <i class="pi pi-camera"></i>
          <span>{{ getTotalPhotos() }} H√¨nh ·∫£nh</span>
        </div>
        <div class="stat-item">
          <i class="pi pi-heart-fill"></i>
          <span>K·ª∑ ni·ªám ƒë·∫πp</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Floating hearts animation -->
  <div class="floating-hearts">
    <span class="heart" *ngFor="let i of [1,2,3,4,5,6,7,8]">‚ù§Ô∏è</span>
  </div>
</div>

<!-- Album Content Section -->
<div class="album-content" *ngIf="!selectedAlbumId">
  <div class="container">
    <div class="album-controls-row">
      <!-- View Controls -->
      <div class="view-controls">
        <button [class.active]="viewMode === 'grid'" (click)="viewMode = 'grid'" class="view-btn" title="Grid View">
          <i class="pi pi-th-large"></i>
        </button>
        <button [class.active]="viewMode === 'list'" (click)="viewMode = 'list'" class="view-btn" title="List View">
          <i class="pi pi-list"></i>
        </button>
      </div>
      <!-- User Guide -->
      <div class="user-guide">
        <i class="pi pi-info-circle"></i>
        <span>Click v√†o album ƒë·ªÉ xem chi ti·∫øt nh√©! ü•∞</span>
      </div>
    </div>

    <!-- Grid View -->
    <div class="albums-grid" *ngIf="viewMode === 'grid'">
      <ng-container *ngIf="albums.length; else noAlbums">
        <div class="album-card" *ngFor="let album of albums" (click)="openAlbum(album.id)">
          <div class="album-cover">
            <img [src]="album.coverImage" [alt]="album.title" loading="lazy">
            <div class="album-overlay">
              <span class="photo-count">
                <i class="pi pi-images"></i> {{ album.photoCount }}
              </span>
              <span class="view-details">
                <i class="pi pi-eye"></i>
              </span>
            </div>
          </div>
          <div class="album-info">
            <h3>{{ album.title }}</h3>
            <p>{{ album.description }}</p>
          </div>
        </div>
      </ng-container>
      <ng-template #noAlbums>
        <div class="empty-message">Ch∆∞a c√≥ album n√†o ƒë∆∞·ª£c t·∫°o.</div>
      </ng-template>
    </div>

    <!-- List View -->
    <div class="albums-list" *ngIf="viewMode === 'list'">
      <ng-container *ngIf="albums.length; else noAlbumsList">
        <div class="album-row" *ngFor="let album of albums" (click)="openAlbum(album.id)">
          <div class="album-thumbnail">
            <img [src]="album.coverImage" [alt]="album.title" loading="lazy">
          </div>
          <div class="album-details">
            <h3>{{ album.title }}</h3>
            <p>{{ album.description }}</p>
            <div class="album-meta">
              <span class="photo-count">
                <i class="pi pi-images"></i> {{ album.photoCount }} ·∫£nh
              </span>
            </div>
          </div>
        </div>
      </ng-container>
      <ng-template #noAlbumsList>
        <div class="empty-message">Ch∆∞a c√≥ album n√†o ƒë∆∞·ª£c t·∫°o.</div>
      </ng-template>
    </div>

    <!-- Quote Section -->
    <div class="quote-section">
      <blockquote>
        ‚ÄúM·ªói b·ª©c ·∫£nh l√† m·ªôt kho·∫£nh kh·∫Øc qu√Ω gi√°, l√† m·ªôt k·ª∑ ni·ªám ƒë·∫πp m√† ch√∫ng m√¨nh ƒë√£ c√πng nhau tr·∫£i qua.‚Äù
      </blockquote>
      <div class="quote-author">- Ba Heo & Heo B·ªâm -</div>
    </div>
  </div>
</div>

<!-- Album Detail View -->
<div class="container" *ngIf="selectedAlbumId">
  <div class="detail-header">
    <button class="back-btn" (click)="goBack()">
      <i class="pi pi-arrow-left"></i>
    </button>
    <div class="album-title">
      <h2>{{ selectedAlbum?.title }}</h2>
      <p>{{ selectedAlbum?.description }}</p>
    </div>
    <!-- View Mode Controls -->
    <div class="view-mode-controls">
      <button [class.active]="detailViewMode === 'grid'" 
              (click)="setDetailViewMode('grid')" 
              class="view-btn" 
              title="Grid View">
        <i class="pi pi-th-large"></i>
      </button>
      <button [class.active]="detailViewMode === 'masonry'" 
              (click)="setDetailViewMode('masonry')" 
              class="view-btn" 
              title="Masonry View">
        <i class="pi pi-images"></i>
      </button>
      <button [class.active]="detailViewMode === 'carousel'" 
              (click)="setDetailViewMode('carousel')" 
              class="view-btn" 
              title="Carousel View">
        <i class="pi pi-sliders-h"></i>
      </button>
    </div>
  </div>

  <!-- Grid View -->
  <div class="photos-grid" *ngIf="detailViewMode === 'grid'">
    <ng-container *ngIf="selectedAlbumPhotos.length; else noPhotos">
      <div class="photo-card" *ngFor="let photo of selectedAlbumPhotos" (click)="openPhotoViewer(photo)">
        <div class="photo-wrapper">
          <img [src]="photo.url" [alt]="photo.title" loading="lazy">
          <div class="photo-overlay">
            <i class="pi pi-search"></i>
          </div>
        </div>
        <div class="photo-info">
          <h4>{{ photo.title }}</h4>
          <p *ngIf="photo.description">{{ photo.description }}</p>
        </div>
      </div>
    </ng-container>
    <ng-template #noPhotos>
      <div class="empty-message">Ch∆∞a c√≥ h√¨nh ·∫£nh n√†o trong album n√†y.</div>
    </ng-template>
  </div>

  <!-- Masonry View -->
  <div class="photos-masonry" *ngIf="detailViewMode === 'masonry'">
    <ng-container *ngIf="selectedAlbumPhotos.length; else noPhotosMasonry">
      <div class="masonry-column" *ngFor="let column of getMasonryColumns()">
        <div class="photo-item" *ngFor="let photo of column" (click)="openPhotoViewer(photo)">
          <img [src]="photo.url" [alt]="photo.title" loading="lazy">
          <div class="photo-overlay">
            <div class="photo-info">
              <h4>{{ photo.title }}</h4>
              <p *ngIf="photo.description">{{ photo.description }}</p>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
    <ng-template #noPhotosMasonry>
      <div class="empty-message">Ch∆∞a c√≥ h√¨nh ·∫£nh n√†o trong album n√†y.</div>
    </ng-template>
  </div>

  <!-- Carousel View -->
  <div class="photos-carousel" *ngIf="detailViewMode === 'carousel'">
    <ng-container *ngIf="selectedAlbumPhotos.length; else noPhotosCarousel">
      <button class="carousel-nav prev" (click)="prevSlide()" [disabled]="currentSlide === 0">
        <i class="pi pi-chevron-left"></i>
      </button>

      <div class="carousel-container">
        <div class="carousel-slide" 
             *ngFor="let photo of selectedAlbumPhotos; let i = index"
             [class.active]="i === currentSlide"
             (click)="openPhotoViewer(photo)">
          <img [src]="photo.url" [alt]="photo.title">
          <div class="slide-info">
            <h4>{{ photo.title }}</h4>
            <p *ngIf="photo.description">{{ photo.description }}</p>
          </div>
        </div>
      </div>

      <button class="carousel-nav next" (click)="nextSlide()" [disabled]="currentSlide === selectedAlbumPhotos.length - 1">
        <i class="pi pi-chevron-right"></i>
      </button>

      <div class="carousel-dots">
        <button *ngFor="let photo of selectedAlbumPhotos; let i = index" 
                class="dot" 
                [class.active]="i === currentSlide"
                (click)="goToSlide(i)">
        </button>
      </div>
    </ng-container>
    <ng-template #noPhotosCarousel>
      <div class="empty-message">Ch∆∞a c√≥ h√¨nh ·∫£nh n√†o trong album n√†y.</div>
    </ng-template>
  </div>
</div>

<!-- Fullscreen Photo Viewer -->
<div class="fullscreen-viewer" *ngIf="selectedPhoto" (click)="closePhotoViewer()">
  <button class="close-btn">
    <i class="pi pi-times"></i>
  </button>
  
  <button class="nav-btn prev" (click)="prevPhoto($event)" *ngIf="canNavigatePrev()">
    <i class="pi pi-chevron-left"></i>
  </button>
  
  <div class="viewer-content" (click)="$event.stopPropagation()">
    <img [src]="selectedPhoto.url" [alt]="selectedPhoto.title">
    <div class="photo-info">
      <h3>{{ selectedPhoto.title }}</h3>
      <p *ngIf="selectedPhoto.description">{{ selectedPhoto.description }}</p>
    </div>
  </div>
  
  <button class="nav-btn next" (click)="nextPhoto($event)" *ngIf="canNavigateNext()">
    <i class="pi pi-chevron-right"></i>
  </button>
</div>
