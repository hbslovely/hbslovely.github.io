<!-- Static Header -->
<div class="detail-header" *ngIf="place">
  <div class="header-image">
    <div class="header-overlay"></div>
    <img src="assets/images/anh-chu-dao/avatar-couple.png" alt="Our Journey Together">
    <div class="overlay-text">
      <div class="header-content">
        <h1>{{ place.name }}</h1>
        <div class="location-badge">
          <i class="pi pi-map-marker"></i>
          <span>{{ place.location }}</span>
        </div>
      </div>
    </div>
  </div>
  <button class="back-button" (click)="goBack()">
    <i class="pi pi-arrow-left"></i>
    <span>Quay lại</span>
  </button>
</div>

<!-- Place Image -->
<div class="place-image-section">
  <figure class="place-figure">
    <img [src]="$any(place)?.image" [alt]="$any(place)?.name" class="main-image">
    <figcaption class="image-caption">
      <div class="caption-content">
        <i class="pi pi-info-circle"></i>
        <p>{{ $any(place)?.description }}</p>
      </div>
    </figcaption>
  </figure>
</div>

<!-- Place Content -->
<div class="place-content" *ngIf="place">
  <div class="container">
    <!-- Place Details -->
    <div class="place-details">

      <!-- Detailed Description -->
      <div class="detail-section">
        <div class="section-header">
          <i class="pi pi-book"></i>
          <h3>Giới thiệu</h3>
        </div>
        <p>{{ place.detailedDescription }}</p>
      </div>

      <!-- Best Time to Visit -->
      <div class="detail-section" *ngIf="place.bestTimeToVisit">
        <div class="section-header">
          <i class="pi pi-sun"></i>
          <h3>Thời điểm lý tưởng</h3>
        </div>
        <div class="best-time-content">
          <p>{{ place.bestTimeToVisit }}</p>
          <div class="season-tips" *ngIf="$any(place)?.seasonalTips">
            <h4>Lưu ý theo mùa:</h4>
            <ul>
              <li *ngFor="let tip of $any(place)?.seasonalTips">{{ tip }}</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- How to Get There -->
      <div class="detail-section" *ngIf="$any(place)?.howToGet">
        <div class="section-header">
          <i class="pi pi-compass"></i>
          <h3>Cách đến đây</h3>
        </div>
        <div class="driving-instructions">
          <div class="instruction-steps">
            {{ place.howToGet }}
          </div>
        </div>
      </div>

      <!-- Food Section -->
      <div class="detail-section" *ngIf="(place.localFood && place.localFood.length > 0) || (place.recommendedFood && place.recommendedFood.length > 0)">
        <div class="section-header">
          <i class="pi pi-star"></i>
          <h3>Ẩm thực địa phương</h3>
        </div>

        <!-- Recommended Food -->
        <div class="food-section" *ngIf="place.recommendedFood && place.recommendedFood.length > 0">
          <h4 class="section-subtitle">Món ăn nên thử</h4>
          <div class="food-grid">
            <div class="food-item" *ngFor="let food of place.recommendedFood">
              <div class="food-content">
                <div class="food-header">
                  <h5>{{ food.name }}</h5>
                  <span class="recommended-badge">
                    <i class="pi pi-star-fill"></i>
                    Đề xuất
                  </span>
                </div>
                <p>{{ food.description }}</p>
                <div class="food-details">
                  <div class="restaurant-info" *ngIf="food.restaurant || food.where">
                    <i class="pi pi-home"></i>
                    <span>{{ food.restaurant || food.where }}</span>
                  </div>
                  <div class="price-info" *ngIf="food.price">
                    <i class="pi pi-tag"></i>
                    <span>{{ food.price }}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Local Food -->
        <div class="food-section" *ngIf="place.localFood && place.localFood.length > 0">
          <h4 class="section-subtitle">Đặc sản địa phương</h4>
          <div class="food-grid">
            <div class="food-item" *ngFor="let food of place.localFood">
              <div class="food-content">
                <div class="food-header">
                  <h5>{{ food.name }}</h5>
                  <span class="local-badge">
                    <i class="pi pi-heart-fill"></i>
                    Đặc sản
                  </span>
                </div>
                <p>{{ food.description }}</p>
                <div class="food-details">
                  <div class="restaurant-info" *ngIf="food.restaurant || food.where">
                    <i class="pi pi-map-marker"></i>
                    {{ food.restaurant || food.where }}
                  </div>
                  <div class="price-info" *ngIf="food.price">
                    <i class="pi pi-tag"></i>
                    {{ food.price }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Nearby Attractions -->
      <div class="detail-section" *ngIf="place.nearbyAttractions && place.nearbyAttractions.length > 0">
        <div class="section-header">
          <i class="pi pi-map-marker"></i>
          <h3>Địa điểm lân cận</h3>
        </div>
        <div class="attractions-grid">
          <div class="attraction-item" *ngFor="let attraction of place.nearbyAttractions">
            <div class="attraction-content">
              <h4>{{ attraction.name }}</h4>
              <p>{{ attraction.description }}</p>
              <div class="attraction-directions">
                <i class="pi pi-map-marker"></i>
                <span>{{ attraction.distance }} • {{ attraction.travelTime }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Other Places -->
      <div class="detail-section" *ngIf="otherPlaces.length > 0">
        <div class="section-header">
          <i class="pi pi-globe"></i>
          <h3>Các địa điểm khác</h3>
        </div>
        <div class="places-grid">
          <app-place-card
            *ngFor="let otherPlace of otherPlaces"
            [place]="otherPlace">
          </app-place-card>
        </div>
      </div>
    </div>

    <!-- Loading State -->
    <div class="loading-state" *ngIf="loading">
      <i class="pi pi-spin pi-spinner"></i>
      <span>Đang tải...</span>
    </div>
  </div>
</div>
