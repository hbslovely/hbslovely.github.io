<div class="wards-container">
  <!-- Hero Section -->
  <section class="hero">
    <h1>{{ 'WARD.TITLE' | translate }}</h1>
    <p>{{ 'WARD.DESCRIPTION' | translate }}</p>
  </section>

  <!-- Filters -->
  <section class="filters-container">
    <div class="filters-wrapper">
      <!-- Search and View Toggle -->
      <div class="search-and-view">
        <div class="search-box">
          <input 
            type="text" 
            [placeholder]="'WARD.SEARCH.PLACEHOLDER' | translate" 
            [(ngModel)]="searchTerm"
            (ngModelChange)="filterWards()">
          <i class="fas fa-search"></i>
        </div>
        <div class="view-toggle">
          <button 
            [class.active]="isGridView" 
            (click)="toggleView()"
            title="{{ 'VIEW_TYPES.GRID' | translate }}">
            <i class="fas fa-th-large"></i>
          </button>
          <button 
            [class.active]="!isGridView" 
            (click)="toggleView()"
            title="{{ 'VIEW_TYPES.LIST' | translate }}">
            <i class="fas fa-list"></i>
          </button>
        </div>
      </div>

      <!-- Filter Options -->
      <div class="filter-options">
        <!-- Features Multi-select -->
        <div class="features-filter">
          <label>{{ 'WARD.FILTERS.FEATURES' | translate }}</label>
          <div class="feature-chips">
            <button 
              *ngFor="let feature of features"
              class="feature-chip"
              [class.active]="isFeatureSelected(feature)"
              (click)="toggleFeature(feature)">
              <i class="fas" [class.fa-check]="isFeatureSelected(feature)"></i>
              {{ feature | translate }}
            </button>
          </div>
        </div>

        <!-- Ward Type Select -->
        <div class="type-filter">
          <label>{{ 'WARD.FILTERS.TYPE' | translate }}</label>
          <select [(ngModel)]="selectedType" (ngModelChange)="filterWards()">
            <option value="">{{ 'WARD.FILTERS.ALL_TYPES' | translate }}</option>
            <option *ngFor="let type of wardTypes" [value]="type">
              {{ type | translate }}
            </option>
          </select>
        </div>

        <!-- Culture Filter -->
        <div class="culture-filter">
          <label>{{ 'WARD.FILTERS.CULTURE' | translate }}</label>
          <div class="culture-chips">
            <button 
              *ngFor="let culture of cultures"
              class="culture-chip"
              [class.active]="isCultureSelected(culture)"
              (click)="toggleCulture(culture)">
              <i class="fas" [class.fa-check]="isCultureSelected(culture)"></i>
              {{ 'CULTURES.' + culture | translate }}
            </button>
          </div>
        </div>

        <!-- Reset Button -->
        <button class="reset-button" (click)="resetFilters()">
          <i class="fas fa-undo"></i>
          {{ 'WARD.FILTERS.RESET' | translate }}
        </button>
      </div>
    </div>

    <!-- Active Filters Display -->
    <div class="active-filters" *ngIf="selectedFeatures.length > 0 || selectedType || searchTerm">
      <span class="filter-label">{{ 'WARD.FILTERS.ACTIVE_FILTERS' | translate }}:</span>
      <div class="filter-tags">
        <span class="filter-tag" *ngIf="searchTerm">
          "{{ searchTerm }}"
          <i class="fas fa-times" (click)="searchTerm = ''; filterWards()"></i>
        </span>
        <span class="filter-tag" *ngFor="let feature of selectedFeatures">
          {{ feature | translate }}
          <i class="fas fa-times" (click)="toggleFeature(feature)"></i>
        </span>
        <span class="filter-tag" *ngIf="selectedType">
          {{ selectedType | translate }}
          <i class="fas fa-times" (click)="selectedType = ''; filterWards()"></i>
        </span>
      </div>
    </div>
  </section>

  <!-- Wards Display -->
  <section [class]="isGridView ? 'wards-grid' : 'wards-list'">
    <ng-container *ngIf="isGridView">
      <app-ward-card 
        *ngFor="let ward of displayedWards" 
        [ward]="ward">
      </app-ward-card>
    </ng-container>
    <ng-container *ngIf="!isGridView">
      <app-ward-list-item 
        *ngFor="let ward of displayedWards" 
        [ward]="ward">
      </app-ward-list-item>
    </ng-container>
  </section>

  <!-- Pagination -->
  <section class="pagination" *ngIf="totalItems > 0">
    <div class="pagination-wrapper">
      <div class="pagination-info">
        {{ 'PAGINATION.SHOWING' | translate }} {{ startIndex }} {{ 'PAGINATION.TO' | translate }} {{ endIndex }} 
        {{ 'PAGINATION.OF' | translate }} {{ totalItems }} {{ 'PAGINATION.TOTAL' | translate }}
      </div>
      
      <div class="pagination-controls">
        <!-- First Page -->
        <button 
          class="page-button"
          [disabled]="currentPage === 1"
          (click)="onPageChange(1)"
          title="{{ 'PAGINATION.FIRST' | translate }}">
          <i class="fas fa-angle-double-left"></i>
        </button>

        <!-- Previous -->
        <button 
          class="page-button"
          [disabled]="currentPage === 1"
          (click)="onPageChange(currentPage - 1)"
          title="{{ 'PAGINATION.PREVIOUS' | translate }}">
          <i class="fas fa-angle-left"></i>
        </button>

        <!-- Page Numbers -->
        <div class="page-numbers">
          <ng-container *ngFor="let page of getPageNumbers()">
            <button 
              *ngIf="page !== '...'"
              class="page-number"
              [class.active]="page === currentPage"
              (click)="handlePageChange(page)">
              {{ page }}
            </button>
            <span *ngIf="page === '...'" class="ellipsis">{{ page }}</span>
          </ng-container>
        </div>

        <!-- Next -->
        <button 
          class="page-button"
          [disabled]="currentPage === totalPages"
          (click)="onPageChange(currentPage + 1)"
          title="{{ 'PAGINATION.NEXT' | translate }}">
          <i class="fas fa-angle-right"></i>
        </button>

        <!-- Last Page -->
        <button 
          class="page-button"
          [disabled]="currentPage === totalPages"
          (click)="onPageChange(totalPages)"
          title="{{ 'PAGINATION.LAST' | translate }}">
          <i class="fas fa-angle-double-right"></i>
        </button>
      </div>

      <div class="items-per-page">
        <div class="select-wrapper">
          <select [(ngModel)]="itemsPerPage" (ngModelChange)="onItemsPerPageChange($event)">
            <option *ngFor="let size of pageSizeOptions" [value]="size">
              {{ size }} {{ 'PAGINATION.ITEMS' | translate }}
            </option>
          </select>
          <i class="fas fa-chevron-down"></i>
        </div>
      </div>
    </div>
  </section>

  <!-- No Results -->
  <div class="no-results" *ngIf="filteredWards.length === 0">
    <i class="fas fa-search"></i>
    <h3>{{ 'WARD.NO_RESULTS.TITLE' | translate }}</h3>
    <p>{{ 'WARD.NO_RESULTS.MESSAGE' | translate }}</p>
  </div>
</div>
