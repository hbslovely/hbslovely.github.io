<div class="tips-container">
  <ng-container *ngIf="tipsData$ && (tipsData$ | async)">
    @let tipsData = tipsData$ | async;
    @if (tipsData) {
      <!-- Local Etiquette Section -->
      <section class="tips-section" *ngIf="tipsData.localEtiquette as etiquette">
        <h2 class="section-title">{{ etiquette.title }}</h2>
        <div class="tips-grid">
          <div class="tip-card" *ngFor="let sectionKey of getSectionKeys(etiquette)">
            <div class="card-content">
              <h3 class="card-title">{{ etiquette.sections[sectionKey].title }}</h3>
              <p class="card-description" *ngIf="etiquette.sections[sectionKey].description">
                {{ etiquette.sections[sectionKey].description }}
              </p>
              <ul class="guidelines-list">
                <li *ngFor="let guidelineKey of getGuidelineKeys(etiquette.sections[sectionKey])">
                  {{ etiquette.sections[sectionKey].guidelines[guidelineKey] }}
                </li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- Safety Tips Section -->
      <section class="tips-section" *ngIf="tipsData.safetyTips as safety">
        <h2 class="section-title">{{ safety.title }}</h2>
        <div class="tips-grid">
          <div class="tip-card" *ngFor="let sectionKey of getSectionKeys(safety)">
            <div class="card-content">
              <h3 class="card-title">{{ safety.sections[sectionKey].title }}</h3>
              <p class="card-description" *ngIf="safety.sections[sectionKey].description">
                {{ safety.sections[sectionKey].description }}
              </p>
              <ul class="guidelines-list">
                <li *ngFor="let guidelineKey of getGuidelineKeys(safety.sections[sectionKey])">
                  {{ safety.sections[sectionKey].guidelines[guidelineKey] }}
                </li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- Cultural Awareness Section -->
      <section class="tips-section" *ngIf="tipsData.culturalAwareness as cultural">
        <h2 class="section-title">{{ cultural.title }}</h2>
        <div class="tips-grid">
          <div class="tip-card" *ngFor="let sectionKey of getSectionKeys(cultural)">
            <div class="card-content">
              <h3 class="card-title">{{ cultural.sections[sectionKey].title }}</h3>
              <p class="card-description" *ngIf="cultural.sections[sectionKey].description">
                {{ cultural.sections[sectionKey].description }}
              </p>
              <ul class="guidelines-list">
                <li *ngFor="let guidelineKey of getGuidelineKeys(cultural.sections[sectionKey])">
                  {{ cultural.sections[sectionKey].guidelines[guidelineKey] }}
                </li>
              </ul>
            </div>
          </div>
        </div>
      </section>
    }
  </ng-container>
</div>
